<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SSMP Training</title>
<script src="https://www.youtube.com/iframe_api"></script>
<script>var ytApiReady = false; function onYouTubeIframeAPIReady() { ytApiReady = true; }</script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --blue:         #1a5276;
    --blue-dark:    #0f2d42;
    --blue-hover:   #154360;
    --cream:        #f5f0e8;
    --cream-2:      #ede8de;
    --green:        #27864a;
    --green-dim:    rgba(39,134,74,0.12);
    --green-hover:  #1e6b3a;
    --red:          #c0392b;
    --red-dim:      rgba(192,57,43,0.12);
    --gold:         #d4a017;
    --gold-dim:     rgba(212,160,23,0.15);
    --dark:         #1a1a1a;
    --mid:          #4a4a4a;
    --muted:        #888;
    --on-blue:      #f5f0e8;
    --on-blue-2:    rgba(245,240,232,0.65);
    --on-blue-3:    rgba(245,240,232,0.32);
    --border-cream: rgba(26,82,118,0.14);
    --border-blue:  rgba(255,255,255,0.10);
    --sidebar-w:    256px;
    --header-h:     58px;
  }

  html, body { height: 100%; font-family: 'Inter', sans-serif; background: var(--blue); color: var(--dark); overflow: hidden; }

  /* â”€â”€â”€ App shell â”€â”€â”€ */
  .app-shell {
    display: grid;
    grid-template-columns: var(--sidebar-w) 1fr;
    height: 100vh;
    overflow: hidden;
  }

  /* â”€â”€â”€ Sidebar â”€â”€â”€ */
  .sidebar {
    background: var(--blue-dark);
    border-right: 1px solid var(--border-blue);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    z-index: 10;
  }

  .sidebar-header {
    padding: 20px 18px 14px;
    border-bottom: 1px solid var(--border-blue);
    flex-shrink: 0;
  }

  .sidebar-brand {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 3px;
  }

  .brand-badge {
    width: 30px;
    height: 30px;
    background: linear-gradient(135deg, var(--gold) 0%, #b8860b 100%);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: 800;
    color: white;
    letter-spacing: -0.5px;
    flex-shrink: 0;
  }

  .brand-name {
    font-size: 14px;
    font-weight: 700;
    color: var(--on-blue);
  }

  .brand-sub {
    font-size: 11px;
    color: var(--on-blue-3);
    padding-left: 40px;
    margin-bottom: 12px;
  }

  .sidebar-prog-row {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .sidebar-prog-track {
    flex: 1;
    height: 3px;
    background: rgba(255,255,255,0.10);
    border-radius: 2px;
    overflow: hidden;
  }

  .sidebar-prog-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--gold), var(--green));
    border-radius: 2px;
    transition: width 0.6s cubic-bezier(0.4,0,0.2,1);
    width: 0%;
  }

  .sidebar-prog-pct {
    font-size: 11px;
    font-weight: 700;
    color: var(--on-blue-2);
    min-width: 28px;
    text-align: right;
  }

  .sidebar-nav {
    flex: 1;
    overflow-y: auto;
    padding: 6px 0;
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.08) transparent;
  }

  .sidebar-nav::-webkit-scrollbar { width: 3px; }
  .sidebar-nav::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.08); border-radius: 2px; }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 16px;
    cursor: pointer;
    transition: background 0.15s ease;
    position: relative;
    user-select: none;
  }

  .nav-item:hover { background: rgba(255,255,255,0.04); }

  .nav-item.active {
    background: var(--gold-dim);
  }

  .nav-item.active::before {
    content: '';
    position: absolute;
    left: 0; top: 5px; bottom: 5px;
    width: 2px;
    background: var(--gold);
    border-radius: 0 2px 2px 0;
  }

  .nav-status {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: rgba(255,255,255,0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: 700;
    color: var(--on-blue-3);
    flex-shrink: 0;
    transition: all 0.3s ease;
  }

  .nav-item.active .nav-status { background: var(--gold); color: var(--dark); }
  .nav-item.completed .nav-status { background: var(--green); color: white; font-size: 10px; }

  .nav-label {
    font-size: 12.5px;
    font-weight: 500;
    color: var(--on-blue-3);
    flex: 1;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    transition: color 0.15s ease;
  }

  .nav-item.active .nav-label { color: var(--on-blue); font-weight: 600; }
  .nav-item.completed .nav-label { color: var(--on-blue-2); }

  .nav-type-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: rgba(255,255,255,0.12);
    flex-shrink: 0;
    transition: background 0.2s;
  }

  .nav-item.active .nav-type-dot { background: var(--gold); }
  .nav-item.completed .nav-type-dot { background: var(--green); }

  /* â”€â”€â”€ Main panel â”€â”€â”€ */
  .main-panel {
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .top-bar {
    height: var(--header-h);
    border-bottom: 1px solid var(--border-blue);
    padding: 0 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
    background: var(--blue-dark);
  }

  .top-bar-left { display: flex; flex-direction: column; gap: 1px; }

  .top-bar-type {
    font-size: 9.5px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.8px;
    color: var(--gold);
  }

  .top-bar-title {
    font-size: 13.5px;
    font-weight: 600;
    color: var(--on-blue);
  }

  .top-bar-right { display: flex; align-items: center; gap: 4px; }

  .prog-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: rgba(255,255,255,0.15);
    transition: all 0.4s cubic-bezier(0.4,0,0.2,1);
  }

  .prog-dot.completed { background: var(--green); }
  .prog-dot.active { background: var(--gold); width: 18px; border-radius: 3px; }

  /* â”€â”€â”€ Content â”€â”€â”€ */
  .content-area {
    flex: 1;
    overflow-y: auto;
    padding: 28px 24px;
    background: var(--blue);
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.15) transparent;
  }

  .content-area::-webkit-scrollbar { width: 5px; }
  .content-area::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 3px; }

  /* â”€â”€â”€ Content card (cream frame) â”€â”€â”€ */
  .content-card {
    max-width: 760px;
    margin: 0 auto;
    background: var(--cream);
    border-radius: 20px;
    padding: 32px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.25);
  }

  /* Legacy progress bar hidden â€” replaced by top bar dots */
  #progress-bar { display: none; }

  /* â”€â”€â”€ Step â”€â”€â”€ */
  .step { display: none; }
  .step.active { display: block; animation: stepIn 0.35s cubic-bezier(0.4,0,0.2,1); }

  @keyframes stepIn {
    from { opacity: 0; transform: translateY(14px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* â”€â”€â”€ Section header â”€â”€â”€ */
  .section-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--blue);
    margin-bottom: 8px;
  }

  .section-title {
    font-size: 26px;
    font-weight: 800;
    color: var(--dark);
    line-height: 1.25;
    margin-bottom: 12px;
    letter-spacing: -0.5px;
  }

  .section-desc {
    font-size: 14px;
    color: var(--mid);
    line-height: 1.75;
    margin-bottom: 28px;
  }

  .section-instructions {
    font-size: 14px;
    color: var(--mid);
    line-height: 1.75;
    margin-bottom: 24px;
    font-style: italic;
  }

  /* â”€â”€â”€ Video â”€â”€â”€ */
  .video-container {
    background: #1a1a1a;
    border-radius: 14px;
    overflow: hidden;
    aspect-ratio: 16/9;
    margin-bottom: 24px;
    border: 1px solid var(--border-cream);
    position: relative;
  }

  .video-container iframe,
  .video-container #yt-player { width: 100%; height: 100%; border: none; display: block; }

  .video-placeholder {
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    color: #888; gap: 12px;
  }

  .video-placeholder svg { width: 44px; height: 44px; opacity: 0.3; }
  .video-placeholder span { font-size: 13px; opacity: 0.5; }

  /* â”€â”€â”€ Buttons â”€â”€â”€ */
  .btn {
    padding: 10px 22px;
    border-radius: 9px;
    font-size: 13px;
    font-weight: 600;
    font-family: inherit;
    border: none;
    cursor: pointer;
    transition: all 0.2s ease;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    letter-spacing: 0.1px;
    white-space: nowrap;
  }

  .btn-primary {
    background: var(--blue);
    color: white;
  }

  .btn-primary:hover:not(:disabled) {
    background: var(--blue-hover);
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(26,82,118,0.35);
  }

  .btn-submit {
    background: var(--green);
    color: white;
  }

  .btn-submit:hover:not(:disabled) {
    background: var(--green-hover);
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(39,134,74,0.35);
  }

  .btn-back {
    background: transparent;
    color: var(--blue);
    border: 1.5px solid var(--blue);
  }

  .btn-back:hover:not(:disabled) {
    background: rgba(26,82,118,0.07);
    transform: translateY(-1px);
  }

  .btn:disabled { opacity: 0.35; cursor: default; transform: none !important; box-shadow: none !important; }

  .btn-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
    margin-top: 24px;
  }

  .btn-group-right { display: flex; gap: 10px; margin-left: auto; }

  /* â”€â”€â”€ Quiz â€“ categorization (dark blue card) â”€â”€â”€ */
  .dq-container {
    background: linear-gradient(160deg, #0a1e2e 0%, #1a3a5c 100%);
    border: 1px solid rgba(212,160,23,0.20);
    border-radius: 18px;
    padding: 32px 28px 24px;
    min-height: 460px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .dq-counter {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: rgba(245,240,232,0.35);
    margin-bottom: 24px;
  }

  .dq-statement {
    font-size: 20px;
    font-weight: 700;
    color: var(--cream);
    line-height: 1.5;
    flex: 1;
    margin-bottom: 28px;
  }

  .dq-options {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 16px;
  }

  .dq-option {
    width: 100%;
    padding: 13px 24px;
    background: rgba(245,240,232,0.06);
    border: 1px solid rgba(245,240,232,0.15);
    border-radius: 50px;
    color: rgba(245,240,232,0.75);
    font-size: 13.5px;
    font-weight: 700;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.18s ease;
    text-align: center;
    letter-spacing: 0.8px;
    text-transform: uppercase;
  }

  .dq-option:hover:not(:disabled) {
    background: rgba(212,160,23,0.18);
    border-color: rgba(212,160,23,0.6);
    color: var(--cream);
    transform: translateY(-1px);
  }

  .dq-option.selected { background: rgba(212,160,23,0.18); border-color: rgba(212,160,23,0.65); color: var(--cream); }
  .dq-option.correct  { background: rgba(39,134,74,0.22);  border-color: rgba(39,134,74,0.7);  color: var(--cream); }
  .dq-option.incorrect{ background: rgba(192,57,43,0.22);  border-color: rgba(192,57,43,0.7);  color: var(--cream); }
  .dq-option:disabled { cursor: default; }

  .dq-feedback {
    display: none;
    padding: 18px 22px;
    border-radius: 12px;
    font-size: 14px;
    line-height: 1.75;
    color: rgba(245,240,232,0.80);
    background: rgba(245,240,232,0.06);
    border: 1px solid rgba(245,240,232,0.08);
    border-left: 3px solid rgba(245,240,232,0.20);
    margin-bottom: 16px;
    animation: stepIn 0.3s ease;
  }

  .dq-feedback.show { display: block; }
  .dq-feedback.correct  { border-left-color: var(--green); }
  .dq-feedback.incorrect{ border-left-color: var(--red); }

  .dq-btn-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    margin-top: 8px;
  }

  .dq-score-screen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    flex: 1;
    gap: 8px;
    padding: 40px 0;
  }

  .dq-score-pct {
    font-size: 84px;
    font-weight: 800;
    line-height: 1;
    color: var(--gold);
  }

  .dq-score-detail { font-size: 17px; font-weight: 600; color: rgba(245,240,232,0.65); }
  .dq-score-msg    { font-size: 13px; color: rgba(245,240,232,0.35); margin-top: 6px; }

  /* â”€â”€â”€ Quiz â€“ multiple choice (on cream) â”€â”€â”€ */
  .quiz-counter {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--muted);
    margin-bottom: 8px;
  }

  .quiz-question {
    font-size: 17px;
    font-weight: 700;
    color: var(--dark);
    line-height: 1.5;
    margin-bottom: 18px;
  }

  .mc-options {
    display: flex;
    flex-direction: column;
    gap: 9px;
    margin-bottom: 20px;
  }

  .mc-option {
    padding: 14px 18px;
    background: white;
    border: 1.5px solid var(--border-cream);
    border-radius: 11px;
    font-size: 14px;
    font-weight: 500;
    color: var(--mid);
    cursor: pointer;
    transition: all 0.18s ease;
    text-align: left;
    font-family: inherit;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .mc-option::before {
    content: '';
    width: 16px; height: 16px;
    border-radius: 50%;
    border: 2px solid var(--muted);
    flex-shrink: 0;
    transition: all 0.18s ease;
  }

  .mc-option:hover:not(:disabled) {
    border-color: var(--blue);
    background: rgba(26,82,118,0.05);
    color: var(--dark);
  }

  .mc-option:hover:not(:disabled)::before { border-color: var(--blue); }

  .mc-option.selected { border-color: var(--blue); background: rgba(26,82,118,0.06); color: var(--dark); }
  .mc-option.selected::before { border-color: var(--blue); background: var(--blue); box-shadow: inset 0 0 0 3px white; }

  .mc-option.correct  { border-color: var(--green); background: var(--green-dim); color: var(--dark); }
  .mc-option.correct::before  { border-color: var(--green); background: var(--green); box-shadow: inset 0 0 0 3px white; }

  .mc-option.incorrect{ border-color: var(--red); background: var(--red-dim); color: var(--dark); }
  .mc-option.incorrect::before{ border-color: var(--red); background: var(--red); box-shadow: inset 0 0 0 3px white; }

  .mc-option:disabled { cursor: default; }

  /* â”€â”€â”€ Feedback â”€â”€â”€ */
  .feedback {
    padding: 16px 20px;
    border-radius: 12px;
    font-size: 14px;
    line-height: 1.75;
    margin-top: 16px;
    display: none;
    background: white;
    border: 1px solid var(--border-cream);
    border-left: 3px solid var(--border-cream);
    color: var(--mid);
    animation: stepIn 0.3s ease;
  }

  .feedback.show { display: block; }
  .feedback.correct  { border-left-color: var(--green);  background: #eef7f1; }
  .feedback.incorrect{ border-left-color: var(--red);    background: #fdf0ee; }
  .feedback.neutral  { border-left-color: var(--blue);   background: #eef3f8; }

  /* â”€â”€â”€ Slider quiz â”€â”€â”€ */
  .cs-step { padding: 4px 0; }

  .cs-statement {
    font-size: 19px;
    font-weight: 700;
    color: var(--dark);
    line-height: 1.55;
    margin-bottom: 36px;
  }

  .cs-score-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .cs-track-outer { position: relative; margin-bottom: 20px; }

  .cs-numbers-row {
    display: flex;
    justify-content: space-between;
    font-size: 17px;
    font-weight: 800;
    color: var(--mid);
    margin-bottom: 10px;
  }

  .cs-track-area {
    position: relative;
    padding: 8px 0 46px;
  }

  .cs-track-area input[type="range"] {
    position: relative;
    z-index: 2;
    transform: scaleX(-1);
  }

  .cs-correct-zone {
    position: absolute;
    top: 4px;
    height: 14px;
    background: rgba(39,134,74,0.15);
    border: 1px solid rgba(39,134,74,0.4);
    border-radius: 4px;
    display: none;
    pointer-events: none;
    z-index: 1;
  }

  .cs-correct-zone.show { display: block; }

  .cs-value-pill {
    position: absolute;
    bottom: 0;
    background: var(--blue);
    color: white;
    padding: 5px 15px;
    border-radius: 8px;
    font-size: 15px;
    font-weight: 800;
    transform: translateX(-50%);
    pointer-events: none;
    transition: left 0.05s linear;
  }

  .cs-endpoints {
    display: flex;
    justify-content: space-between;
    font-size: 10px;
    font-weight: 700;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-top: 6px;
  }

  /* â”€â”€â”€ Range input â”€â”€â”€ */
  input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 6px;
    background: var(--cream-2);
    border-radius: 3px;
    cursor: pointer;
    margin: 0;
  }

  input[type="range"]::-webkit-slider-runnable-track { height: 6px; background: var(--cream-2); border-radius: 3px; }
  input[type="range"]::-moz-range-track              { height: 6px; background: var(--cream-2); border-radius: 3px; }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 22px; height: 22px;
    border-radius: 50%;
    background: var(--blue);
    border: none;
    box-shadow: 0 2px 8px rgba(26,82,118,0.35);
    margin-top: -8px;
  }

  input[type="range"]::-moz-range-thumb {
    width: 22px; height: 22px;
    border-radius: 50%;
    background: var(--blue);
    border: none;
    box-shadow: 0 2px 8px rgba(26,82,118,0.35);
  }

  input[type="range"]:disabled { opacity: 0.45; cursor: default; }

  /* â”€â”€â”€ Timed reading â”€â”€â”€ */
  .reading-container { text-align: center; }

  .reading-image {
    width: 100%; max-width: 100%;
    border-radius: 14px;
    margin-bottom: 24px;
    border: 1px solid var(--border-cream);
  }

  .reading-instructions {
    font-size: 16px;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 20px;
  }

  .timer-display {
    font-size: 64px;
    font-weight: 800;
    color: var(--blue);
    margin: 20px 0;
    font-variant-numeric: tabular-nums;
  }

  .timer-display.warning {
    color: var(--red);
    animation: pulse 1s ease-in-out infinite;
  }

  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.55; } }

  /* â”€â”€â”€ Text input â”€â”€â”€ */
  .text-prompt {
    background: white;
    padding: 16px 20px;
    border-radius: 12px;
    border-left: 3px solid var(--blue);
    border-top: 1px solid var(--border-cream);
    border-right: 1px solid var(--border-cream);
    border-bottom: 1px solid var(--border-cream);
    font-size: 14px;
    font-style: italic;
    color: var(--mid);
    margin-bottom: 16px;
    line-height: 1.7;
  }

  .text-input-area {
    width: 100%;
    min-height: 120px;
    padding: 16px;
    background: white;
    border: 1.5px solid var(--border-cream);
    border-radius: 12px;
    font-family: inherit;
    font-size: 14px;
    line-height: 1.6;
    resize: vertical;
    transition: border-color 0.2s ease;
    color: var(--dark);
  }

  .text-input-area:focus { outline: none; border-color: var(--blue); }
  .text-input-area::placeholder { color: var(--muted); }

  /* â”€â”€â”€ Links / submission â”€â”€â”€ */
  .resource-section { margin-bottom: 28px; }

  .resource-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1.8px;
    color: var(--blue);
    margin-bottom: 10px;
  }

  .resource-link-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 12px 20px;
    background: var(--blue);
    color: white;
    border-radius: 10px;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.2s ease;
    border: none;
    cursor: pointer;
    font-family: inherit;
  }

  .resource-link-btn:hover {
    background: var(--blue-hover);
    transform: translateY(-1px);
    box-shadow: 0 6px 18px rgba(26,82,118,0.35);
  }

  .copy-block {
    background: white;
    border: 1px solid var(--border-cream);
    border-radius: 12px;
    padding: 18px 20px;
    font-size: 14px;
    line-height: 1.75;
    color: var(--mid);
    margin-bottom: 10px;
    cursor: text;
    user-select: all;
  }

  .copy-btn {
    padding: 7px 18px;
    background: transparent;
    border: 1.5px solid var(--blue);
    border-radius: 8px;
    color: var(--blue);
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
    transition: all 0.2s ease;
  }

  .copy-btn:hover { background: rgba(26,82,118,0.06); }

  .resource-image {
    width: 100%;
    border-radius: 14px;
    border: 1px solid var(--border-cream);
  }

  .ms-form-frame {
    width: 100%;
    height: 500px;
    border: 1px solid var(--border-cream);
    border-radius: 12px;
    background: white;
  }

  /* â”€â”€â”€ Completion â”€â”€â”€ */
  .completion { display: none; }
  .completion.show { display: block; animation: stepIn 0.4s cubic-bezier(0.4,0,0.2,1); }

  .completion-card {
    background: white;
    border: 1px solid var(--border-cream);
    border-radius: 16px;
    padding: 56px 40px;
    text-align: center;
  }

  .completion-icon { font-size: 52px; margin-bottom: 20px; }

  .completion h2 {
    font-size: 28px;
    font-weight: 800;
    color: var(--dark);
    margin-bottom: 12px;
    letter-spacing: -0.5px;
  }

  .completion p {
    font-size: 15px;
    color: var(--mid);
    line-height: 1.75;
    max-width: 480px;
    margin: 0 auto;
  }

  .score-badge {
    display: inline-block;
    background: var(--green-dim);
    color: var(--green);
    padding: 8px 24px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 700;
    margin-top: 20px;
    border: 1px solid rgba(39,134,74,0.25);
  }

  /* â”€â”€â”€ Mobile â”€â”€â”€ */
  @media (max-width: 768px) {
    .app-shell { grid-template-columns: 1fr; }
    .sidebar { display: none; }
    .content-area { padding: 16px 12px; }
    .content-card { padding: 20px; border-radius: 14px; }
    .section-title { font-size: 20px; }
    .dq-statement { font-size: 17px; }
    .cs-statement { font-size: 16px; }
  }
</style>
</head>
<body>

<div class="app-shell">

  <!-- â”€â”€ Sidebar â”€â”€ -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-brand">
        <div class="brand-badge">SS</div>
        <div class="brand-name">SSMP Training</div>
      </div>
      <div class="brand-sub">Interactive Learning Course</div>
      <div class="sidebar-prog-row">
        <div class="sidebar-prog-track">
          <div class="sidebar-prog-fill" id="sidebar-prog-fill"></div>
        </div>
        <div class="sidebar-prog-pct" id="sidebar-prog-pct">0%</div>
      </div>
    </div>
    <nav class="sidebar-nav" id="sidebar-nav"></nav>
  </aside>

  <!-- â”€â”€ Main panel â”€â”€ -->
  <main class="main-panel">
    <header class="top-bar">
      <div class="top-bar-left">
        <div class="top-bar-type" id="top-bar-type">Course</div>
        <div class="top-bar-title" id="top-bar-title">SSMP Training</div>
      </div>
      <div class="top-bar-right" id="progress-bar"></div>
    </header>

    <div class="content-area">
      <div class="content-card">
        <div id="course-content"></div>
        <div class="completion" id="completion"></div>
      </div>
    </div>
  </main>

</div>

<script>
// â”€â”€â”€ Course Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const COURSE_CONFIG = {
  "course": {
    "title": "Interactive Learning Course",
    "sections": [
      {
        "type": "video",
        "id": "video-1",
        "label": "Video 1",
        "title": "Introduction to Message Framing",
        "description": "Watch the video above to learn about how messages are framed and why it matters in communication. When you're ready, continue to the first quiz.",
        "youtube_id": "OmA8pkKfLts",
        "placeholder_text": "Intro Video",
        "button_text": "Continue â†’"
      },
      {
        "type": "timed-reading",
        "id": "reading-1",
        "label": "Reading Exercise",
        "title": "Compare Foreign Policy Statements",
        "instructions": "Read and compare these two foreign policy statements carefully",
        "image_path": "images/foreign-policy-comparison.png",
        "timer_seconds": 30
      },
      {
        "type": "video",
        "id": "video-2",
        "label": "Video 2",
        "title": "Understanding the Framework",
        "description": "This video introduces the SSMP framework and explains how to categorize messaging.",
        "youtube_id": "9sUx90kbTrM",
        "placeholder_text": "Video 2",
        "button_text": "Continue to Quiz â†’"
      },
      {
        "type": "quiz-categorization",
        "id": "ssmp-quiz",
        "label": "SSMP Quiz",
        "title": "Safer, Stronger, More Prosperous",
        "instructions": "Read each statement about U.S. exchange programs and decide: does this make America Safer, Stronger, or More Prosperous?",
        "options": ["Safer", "Stronger", "More Prosperous"],
        "option_emojis": {"Safer": "ðŸ›¡ï¸", "Stronger": "ðŸ’ª", "More Prosperous": "ðŸ’°"},
        "questions": [
          {
            "id": 1,
            "statement": "89% of countries in our workforce exchanges now prefer American tech and training, setting the U.S. as the global standard.",
            "correct": "Stronger",
            "feedback": {
              "Stronger": "That's right! When other countries adopt American standards and prefer U.S. approaches, it reinforces America's global leadership and influence. The key phrase here is 'setting the U.S. as the global standard' â€” that's about positioning and strength on the world stage.",
              "Safer": "Not quite. While global influence can indirectly support security, this statement is really about America's leadership position â€” other countries choosing U.S. tech and training as the standard. That's about influence and strength, not safety. The correct answer is Stronger.",
              "More Prosperous": "Close, but not quite. Tech and training adoption could eventually create economic benefits, but the emphasis here is on the U.S. being seen as the global standard â€” that's about leadership and influence, not direct economic returns. The correct answer is Stronger."
            }
          },
          {
            "id": 2,
            "statement": "Entrepreneurship exchanges created $2.8B in partnerships and 45K U.S. jobs through global entrepreneur collaboration.",
            "correct": "More Prosperous",
            "feedback": {
              "More Prosperous": "Exactly! The dollar signs are a strong signal here. $2.8 billion in partnerships and 45,000 U.S. jobs are direct economic outcomes. Whenever you see revenue, jobs, or investment figures, think More Prosperous.",
              "Safer": "Not this one. There's no security or stability angle in this statement â€” it's all about money and jobs. $2.8B in partnerships and 45K jobs are economic indicators, which map to More Prosperous.",
              "Stronger": "Good instinct â€” collaboration does strengthen relationships. But the statement leads with $2.8B and 45K jobs, which are concrete economic outcomes. When the headline numbers are dollars and jobs, that's More Prosperous."
            }
          },
          {
            "id": 3,
            "statement": "Fellows enhance transatlantic ties through partnerships between European and American business leaders.",
            "correct": "Stronger",
            "feedback": {
              "Stronger": "Correct! 'Enhancing transatlantic ties' and building partnerships between leaders is about deepening alliances and strengthening America's global relationships. That's the core of what Stronger means in this framework.",
              "Safer": "Transatlantic ties do contribute to a more stable world, but this statement is focused on relationship-building between business leaders â€” that's about alliance strength and influence, not security. The correct answer is Stronger.",
              "More Prosperous": "Business leaders are involved, so the economic angle is tempting. But the statement emphasizes 'ties' and 'partnerships' as relationship outcomes, not financial ones. No dollar figures, no jobs â€” this is about strengthening alliances. The correct answer is Stronger."
            }
          },
          {
            "id": 4,
            "statement": "Educational exchanges built pro-democracy networks in 47 nations, fostering civic resilience and reducing the appeal of violent extremism.",
            "correct": "Safer",
            "feedback": {
              "Safer": "Spot on! 'Reducing the appeal of violent extremism' is a clear security outcome. Pro-democracy networks and civic resilience also contribute to global stability, which directly makes America safer.",
              "Stronger": "Pro-democracy networks do strengthen institutions, but the clincher here is 'reducing the appeal of violent extremism.' That's explicitly about security and safety. When you see language about countering threats or extremism, think Safer.",
              "More Prosperous": "This one has no economic indicators at all â€” no dollars, jobs, or trade. It's focused on democracy, civic resilience, and countering extremism, all of which are security outcomes. The correct answer is Safer."
            }
          },
          {
            "id": 5,
            "statement": "Eastern Europe programs stabilized 12 regions via education and training, reducing migration pressures on U.S. borders.",
            "correct": "Safer",
            "feedback": {
              "Safer": "Right! Two safety signals here: 'stabilized regions' and 'reducing migration pressures on U.S. borders.' Both are about security and stability â€” stabilization abroad reduces risks at home.",
              "Stronger": "Stabilization might feel like making America 'stronger,' but look at the second half: 'reducing migration pressures on U.S. borders.' That's a direct homeland security framing. Regional stability plus border security equals Safer.",
              "More Prosperous": "Education and training can have economic benefits, but this statement doesn't mention any. It's focused on stabilizing regions and reducing border pressures â€” both security outcomes. The correct answer is Safer."
            }
          },
          {
            "id": 6,
            "statement": "Foreign study programs earned U.S. universities $780M and international students founded 3,200 U.S.-based companies.",
            "correct": "More Prosperous",
            "feedback": {
              "More Prosperous": "Nailed it! $780M in revenue and 3,200 new companies are textbook economic outcomes. This is as clear-cut as More Prosperous gets â€” direct financial returns flowing back to the U.S.",
              "Safer": "There's nothing in this statement related to security or stability. It's all about money coming into universities and companies being created. Both are economic outcomes, so the correct answer is More Prosperous.",
              "Stronger": "International education does build soft power and influence, but this statement is quantifying the financial return â€” $780M and 3,200 companies. When the data points are economic, go with More Prosperous."
            }
          },
          {
            "id": 7,
            "statement": "78% of firms from our professional exchanges now adopt U.S. business and regulatory standards as their industry model.",
            "correct": "Stronger",
            "feedback": {
              "Stronger": "Exactly right! When foreign firms adopt American standards as their model, that's U.S. influence expanding globally. Standard-setting is one of the clearest forms of global strength and leadership.",
              "Safer": "Regulatory standards might sound like they relate to safety, but this is about U.S. business practices being adopted as the global model. That's influence and leadership, not security. The correct answer is Stronger.",
              "More Prosperous": "Adopting U.S. business standards could eventually make trade easier, but the statement emphasizes the adoption itself â€” 78% of firms looking to America as the model. That's about influence and standard-setting, which is Stronger."
            }
          }
        ]
      },
      {
        "type": "video",
        "id": "video-3-tone",
        "label": "Video 3",
        "title": "Introduction to Tone",
        "description": "Learn about tone in messaging and how to recognize different tonal approaches.",
        "youtube_id": "zoeNtcZz-_0",
        "placeholder_text": "Video 3 - Tone Intro",
        "button_text": "Continue â†’"
      },
      {
        "type": "quiz-slider",
        "id": "tone-practice-1",
        "label": "Tone Practice 1",
        "tiers": {
          "non_framed": { "min": 0, "max": 20, "label": "Non-Framed" },
          "mid": { "min": 20, "max": 70, "label": "Mid-Tier" },
          "framed": { "min": 70, "max": 100, "label": "Framed" }
        },
        "questions": [
          {
            "id": 1,
            "statement": "Through exchange programs, students gain lifelong friendships, discover new cultures, and grow into more confident, curious global learners ready to make a difference.",
            "correct_tier": "non_framed",
            "feedback": {
              "non_framed": "Exactly â€” 'lifelong friendships,' 'discover new cultures,' and 'ready to make a difference' are all personal and experiential. No strategy, no national interest. This sits right at the low end of the scale.",
              "mid": "This is actually non-framed. The language stays entirely personal â€” friendships, cultures, personal growth. There's no policy vocabulary or hint of what the U.S. gains. 'Make a difference' sounds purposeful but stays at the human level.",
              "framed": "Not quite â€” there's no strategic language here at all. It's about personal growth and friendships, not national interest. The correct answer is non-framed (0â€“20)."
            }
          }
        ]
      },
      {
        "type": "video",
        "id": "video-4-tone",
        "label": "Video 4",
        "title": "Advanced Tone Techniques",
        "description": "Explore more sophisticated approaches to tone and framing.",
        "youtube_id": "y4c3n0MyoHg",
        "placeholder_text": "Video 4 - Advanced Tone",
        "button_text": "Continue â†’"
      },
      {
        "type": "quiz-slider",
        "id": "tone-practice-2",
        "label": "Tone Practice 2",
        "tiers": {
          "non_framed": { "min": 0, "max": 20, "label": "Non-Framed" },
          "mid": { "min": 20, "max": 70, "label": "Mid-Tier" },
          "framed": { "min": 70, "max": 100, "label": "Framed" }
        },
        "questions": [
          {
            "id": 1,
            "statement": "American Councils advances U.S. national security by forging trusted international partnerships, equipping Americans with critical language skills, and strengthening U.S. influence abroad to counter adversarial threats.",
            "correct_tier": "framed",
            "feedback": {
              "non_framed": "This is actually heavily framed. 'U.S. national security,' 'counter adversarial threats,' and 'strengthen U.S. influence' are all high-stakes strategic language. Every phrase positions exchange as a national security instrument â€” there's nothing personal or experiential here.",
              "mid": "This actually lands in the framed tier. 'U.S. national security,' 'adversarial threats,' and 'strengthen U.S. influence abroad' are about as direct as America-first language gets. Mid-tier statements balance strategy with cooperation â€” this one is squarely about what the U.S. gains.",
              "framed": "Spot on â€” this is in the framed tier. 'National security,' 'counter adversarial threats,' 'strengthen U.S. influence' pack every clause with strategic intent. Exchange programs are explicitly framed here as instruments of American power and defense."
            }
          }
        ]
      },
      {
        "type": "video",
        "id": "video-5-tone",
        "label": "Video 5",
        "title": "Evaluating Tone",
        "description": "Learn how to evaluate and assess the effectiveness of different tones.",
        "youtube_id": "t47TxYslS2E",
        "placeholder_text": "Video 5 - Evaluating Tone",
        "button_text": "Continue â†’"
      },
      {
        "type": "quiz-slider",
        "id": "tone-multiple-choice",
        "label": "Tone Multiple Choice",
        "title": "Tone Slider: How Framed Is This Message?",
        "instructions": "Read each statement and rate how 'framed' it is on a scale from 0 (completely non-framed, neutral) to 100 (heavily framed, strategic America-first messaging). Drag the slider to where you think it falls.",
        "scale_labels": { "low": "Non-Framed", "high": "Framed" },
        "hint": "0 = purely neutral, 100 = heavily framed",
        "tiers": {
          "non_framed": { "min": 0, "max": 20, "label": "Non-Framed" },
          "mid": { "min": 20, "max": 70, "label": "Mid-Tier" },
          "framed": { "min": 70, "max": 100, "label": "Framed" }
        },
        "questions": [
          {
            "id": 1,
            "statement": "Through exchange, participants develop leadership and understandingâ€”building trust, innovation, and opportunity between the U.S. and global partners.",
            "correct_tier": "mid",
            "feedback": {
              "non_framed": "This one's actually mid-tier. It reads softly, but words like 'leadership,' 'innovation,' and 'opportunity' are doing quiet strategic work â€” they frame exchange as purposeful, not just a personal experience. And 'global partners' positions the U.S. as a player on the world stage. It's subtle, but it's there.",
              "mid": "Good call â€” this sits in the middle. It's not pushing an America-first angle, but 'leadership,' 'innovation,' and 'opportunity' nudge it above purely neutral. 'Global partners' also adds a diplomatic tone that you wouldn't find in unframed personal storytelling.",
              "framed": "This one's actually mid-tier, not heavily framed. While 'leadership' and 'innovation' have a strategic flavor, the tone stays collaborative â€” 'trust,' 'understanding,' 'between the U.S. and global partners.' Compare it to statements that say 'defend U.S. interests' or 'national resilience' â€” that's what heavy framing sounds like."
            }
          },
          {
            "id": 2,
            "statement": "Exchange changes livesâ€”students discover new cultures, make lifelong friends, and return home inspired to make a difference in their communities.",
            "correct_tier": "non_framed",
            "feedback": {
              "non_framed": "Exactly right â€” this is textbook non-framed. 'New cultures,' 'lifelong friends,' 'inspired to make a difference' â€” it's pure personal experience. No strategy, no national interest, no policy language. This is what exchange messaging sounds like before any framing is applied.",
              "mid": "This one's actually non-framed. 'Inspired to make a difference' might sound purposeful, but the whole statement stays at the personal level â€” cultures, friends, communities. There's no hint of U.S. interests, competitiveness, or strategic goals. That's what keeps it at the bottom of the scale.",
              "framed": "This is about as unframed as it gets. There's no strategic language anywhere â€” 'new cultures,' 'lifelong friends,' 'make a difference in their communities' is entirely personal storytelling. When you see language like this with no mention of national interests or policy outcomes, that's your signal it's non-framed."
            }
          },
          {
            "id": 3,
            "statement": "Our programs connect leaders, educators, and innovators across borders, strengthening cooperation and expanding shared prosperity and progress.",
            "correct_tier": "mid",
            "feedback": {
              "non_framed": "This one lands mid-tier. It feels balanced because of words like 'shared' and 'cooperation,' but 'leaders, educators, and innovators' elevates the audience beyond personal stories, and 'prosperity and progress' are policy-level words. It's making a case â€” just a collaborative one.",
              "mid": "Good read â€” this is solidly mid-tier. 'Shared prosperity and progress' introduces a policy angle, and 'leaders, educators, and innovators' elevates the tone. But 'cooperation' and 'shared' keep it framed as mutual benefit rather than American advantage. That balance is what makes it mid-tier.",
              "framed": "This one's actually mid-tier. 'Prosperity and progress' sound strategic, but notice 'shared' and 'cooperation' â€” the message consistently frames exchange as two-way, not America-first. Compare it to statements that name 'U.S. security' or 'national resilience' directly and you'll see the difference."
            }
          },
          {
            "id": 4,
            "statement": "Investing in language and leadership exchanges builds a competitive workforce ready to defend U.S. interests and promote national resilience worldwide.",
            "correct_tier": "framed",
            "feedback": {
              "non_framed": "This one is heavily framed. Look at what's packed in here: 'competitive workforce' treats people as strategic assets, 'defend U.S. interests' is explicitly America-first, and 'national resilience' is security language. Even the opening word 'investing' frames exchange as a return on investment for the U.S., not a mutual benefit.",
              "mid": "This actually lands in the framed tier. 'Competitive workforce' and 'national resilience' are doing heavy lifting, and 'defend U.S. interests' is about as direct as America-first language gets. Mid-tier statements talk about cooperation and shared benefit â€” this one is squarely about what the U.S. gets out of it.",
              "framed": "Spot on â€” this is clearly in the framed tier. 'Competitive workforce,' 'defend U.S. interests,' 'national resilience' â€” every major phrase positions exchange as a tool for American strategic advantage. The word 'investing' at the start seals it, framing the whole thing as an ROI argument for the U.S."
            }
          },
          {
            "id": 5,
            "statement": "From new foods to first snowfalls, every exchange story reminds us how shared experiences build empathy, curiosity, and lasting friendships.",
            "correct_tier": "non_framed",
            "feedback": {
              "non_framed": "Perfect â€” this is the least framed statement in the set. 'New foods,' 'first snowfalls,' 'empathy,' 'curiosity,' 'lasting friendships' â€” it's entirely personal and experiential. There's zero strategic content. This is what purely non-framed exchange messaging looks like.",
              "mid": "This one's actually non-framed. 'New foods,' 'first snowfalls,' and 'lasting friendships' are as personal and apolitical as it gets. There's no policy vocabulary, no national interest angle, nothing about what the U.S. gains. When the imagery is this concrete and human, you're at the bottom of the scale.",
              "framed": "This is actually the least framed statement in the set. 'New foods,' 'first snowfalls,' 'empathy,' 'friendships' â€” there's no strategic content at all. Compare the vocabulary here to statements about 'U.S. security' or 'competitive workforce' and you can see the full distance between non-framed and framed."
            }
          },
          {
            "id": 6,
            "statement": "Strategic exchange programs advance U.S. security, strengthen alliances, and equip future leaders to uphold American prosperity and global stability.",
            "correct_tier": "framed",
            "feedback": {
              "non_framed": "This is the most framed statement in the set. The very first word is 'Strategic,' and from there it's wall-to-wall national interest language: 'U.S. security,' 'American prosperity,' 'global stability.' There's almost no reference to the exchange experience itself â€” it's entirely about what the U.S. gains.",
              "mid": "This one's actually heavily framed. Count the strategic keywords: 'Strategic,' 'U.S. security,' 'alliances,' 'American prosperity,' 'global stability.' Every clause serves a national interest argument. Mid-tier statements balance this with cooperative or personal language â€” this one doesn't.",
              "framed": "Nailed it â€” this is the most framed statement in the set. It opens with 'Strategic,' names 'U.S. security' directly, and closes with 'American prosperity and global stability.' Every word is doing framing work. This is what it sounds like when exchange messaging is fully oriented toward national interest."
            }
          }
        ]
      },
      {
        "type": "video",
        "id": "video-6-final",
        "label": "Video 6",
        "title": "Final Practice Session",
        "description": "Watch this final practice session to see all concepts in action.",
        "youtube_id": "_rkMtwy4_mw",
        "placeholder_text": "Video 6 - Final Practice",
        "button_text": "Continue â†’"
      },
      {
        "type": "links-submission",
        "id": "links-submission",
        "label": "Links & Submission",
        "button_text": "Continue â†’"
      },
      {
        "type": "video",
        "id": "video-7-wrap",
        "label": "Video 7",
        "title": "Wrap Up and Goodbye",
        "description": "Great work getting through the course. Watch this final video for key takeaways and how to apply what you've learned.",
        "youtube_id": "JeBH-Dmq23w",
        "placeholder_text": "Video 7 - Wrap Up",
        "button_text": "Finish Course âœ“"
      }
    ],
    "completion": {
      "icon": "ðŸŽ“",
      "title": "Course Complete!",
      "description": "Congratulations on completing the SSMP Workshop on framing your messages. You can now identify SSMP language and use strategic tone to appeal to different audiences."
    }
  }
};

// â”€â”€â”€ Course App â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
class CourseApp {
  constructor() {
    this.config = COURSE_CONFIG;
    this.currentSectionIndex = 0;
    this.currentQuestionIndex = 0;
    this.quizAnswers = {};
    this.init();
  }

  init() {
    this.buildSidebar();
    this.renderCurrentSection();
  }

  // â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  buildSidebar() {
    const nav = document.getElementById('sidebar-nav');
    nav.innerHTML = '';

    this.config.course.sections.forEach((section, index) => {
      const item = document.createElement('div');
      item.className = 'nav-item';
      item.id = `nav-item-${index}`;
      item.onclick = () => {
        if (index <= this.currentSectionIndex) {
          this.currentSectionIndex = index;
          this.currentQuestionIndex = 0;
          this.renderCurrentSection();
        }
      };

      item.innerHTML = `
        <div class="nav-status" id="nav-status-${index}">${index + 1}</div>
        <div class="nav-label">${section.label || section.title || 'Section ' + (index + 1)}</div>
        <div class="nav-type-dot"></div>
      `;

      nav.appendChild(item);
    });
  }

  // â”€â”€ Progress â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  updateProgress() {
    const total = this.config.course.sections.length;
    const pct = Math.round((this.currentSectionIndex / total) * 100);

    // Sidebar fill
    const fill = document.getElementById('sidebar-prog-fill');
    const pctEl = document.getElementById('sidebar-prog-pct');
    if (fill) fill.style.width = pct + '%';
    if (pctEl) pctEl.textContent = pct + '%';

    // Sidebar nav items
    this.config.course.sections.forEach((_, index) => {
      const item   = document.getElementById(`nav-item-${index}`);
      const status = document.getElementById(`nav-status-${index}`);
      if (!item) return;

      item.classList.remove('active', 'completed');
      if (index < this.currentSectionIndex) {
        item.classList.add('completed');
        if (status) status.innerHTML = 'âœ“';
      } else if (index === this.currentSectionIndex) {
        item.classList.add('active');
        if (status) status.textContent = index + 1;
      } else {
        if (status) status.textContent = index + 1;
      }
    });

    // Top bar dots
    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      progressBar.innerHTML = '';
      this.config.course.sections.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = 'prog-dot';
        if (index < this.currentSectionIndex) dot.classList.add('completed');
        else if (index === this.currentSectionIndex) dot.classList.add('active');
        progressBar.appendChild(dot);
      });
    }

    // Top bar label
    const section = this.config.course.sections[this.currentSectionIndex];
    if (section) {
      const typeLabels = {
        'video':               'Video',
        'quiz-categorization': 'Quiz',
        'quiz-slider':         'Assessment',
        'timed-reading':       'Reading',
        'text-input':          'Practice',
        'links-submission':    'Resources'
      };
      const typeEl  = document.getElementById('top-bar-type');
      const titleEl = document.getElementById('top-bar-title');
      if (typeEl)  typeEl.textContent  = typeLabels[section.type] || 'Module';
      if (titleEl) titleEl.textContent = section.title || section.label || '';
    }
  }

  // â”€â”€ Render current section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderCurrentSection() {
    const section   = this.config.course.sections[this.currentSectionIndex];
    const container = document.getElementById('course-content');

    if (section.type === 'video') {
      container.innerHTML = this.renderVideo(section);
      if (section.youtube_id) this.createYTPlayer(section.youtube_id);
    } else if (section.type === 'timed-reading') {
      container.innerHTML = this.renderTimedReading(section);
    } else if (section.type === 'quiz-categorization') {
      container.innerHTML = this.renderCategorizationQuiz(section);
      this.setupCategorizationQuiz(section);
    } else if (section.type === 'quiz-slider') {
      container.innerHTML = this.renderSliderQuiz(section);
      this.setupSliderQuiz(section);
    } else if (section.type === 'text-input') {
      container.innerHTML = this.renderTextInput(section);
    } else if (section.type === 'links-submission') {
      container.innerHTML = this.renderLinksSubmission(section);
    }

    this.updateProgress();
  }

  // â”€â”€ Video â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderVideo(section) {
    const videoContent = section.youtube_id
      ? `<div id="yt-player"></div>`
      : `<div class="video-placeholder">
           <svg viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
           <span>${section.placeholder_text}</span>
         </div>`;

    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active">
        <div class="section-label">${section.label}</div>
        <div class="section-title">${section.title}</div>
        <div class="video-container">${videoContent}</div>
        <div class="section-desc">${section.description || ''}</div>
        <div class="btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-primary" onclick="courseApp.nextSection()">${section.button_text}</button>
          </div>
        </div>
      </div>
    `;
  }

  createYTPlayer(videoId) {
    const tryCreate = () => {
      if (typeof YT === 'undefined' || !YT.Player) { setTimeout(tryCreate, 100); return; }
      new YT.Player('yt-player', {
        videoId,
        playerVars: { rel: 0, modestbranding: 1, playsinline: 1 },
        events: {
          onStateChange: (e) => {
            if (e.data === YT.PlayerState.ENDED) courseApp.nextSection();
          }
        }
      });
    };
    tryCreate();
  }

  // â”€â”€ Timed reading â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderTimedReading(section) {
    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active">
        <div class="reading-container">
          <div class="section-label">${section.label}</div>
          <div class="section-title">${section.title}</div>
          <div class="reading-instructions">${section.instructions}</div>
          <img src="${section.image_path}" alt="Reading material" class="reading-image">
        </div>
        <div class="btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-primary" onclick="courseApp.nextSection()">Continue â†’</button>
          </div>
        </div>
      </div>
    `;
  }

  startTimer(seconds) {
    let timeRemaining = seconds;
    const timerDisplay = document.getElementById('timer-display');

    const countdown = setInterval(() => {
      timeRemaining--;
      timerDisplay.textContent = timeRemaining;
      if (timeRemaining <= 10) timerDisplay.classList.add('warning');
      if (timeRemaining <= 0) {
        clearInterval(countdown);
        setTimeout(() => this.nextSection(), 500);
      }
    }, 1000);
  }

  // â”€â”€ Categorization quiz â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderCategorizationQuiz(section) {
    this.currentQuestionIndex = 0;
    this.quizAnswers[section.id] = [];

    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active dq-container">
        <div>
          <div id="quiz-counter" class="dq-counter"></div>
          <div id="quiz-question" class="dq-statement"></div>
        </div>
        <div>
          <div id="mc-options" class="dq-options"></div>
          <div id="feedback" class="dq-feedback"></div>
          <div class="dq-btn-row">
            ${backBtn}
            <div class="btn-group-right">
              <button class="btn btn-primary" id="next-btn" style="display:none;" onclick="courseApp.nextCategorizationQuestion()">Next â†’</button>
            </div>
          </div>
        </div>
      </div>
    `;
  }

  setupCategorizationQuiz(section) {
    this.renderCategorizationQuestion(section);
  }

  renderCategorizationQuestion(section) {
    const question = section.questions[this.currentQuestionIndex];
    const total    = section.questions.length;

    document.getElementById('quiz-counter').textContent = `Question ${this.currentQuestionIndex + 1} of ${total}`;
    document.getElementById('quiz-question').textContent = question.statement;

    const optionsContainer = document.getElementById('mc-options');
    optionsContainer.innerHTML = '';

    const emojis = section.option_emojis || {};
    section.options.forEach(option => {
      const button = document.createElement('button');
      button.className = 'dq-option';
      button.textContent = (emojis[option] ? emojis[option] + '  ' : '') + option.toUpperCase();
      button.dataset.answer = option;
      button.onclick = () => this.selectCategorizationAnswer(option);
      optionsContainer.appendChild(button);
    });

    document.getElementById('next-btn').style.display = 'none';
    document.getElementById('feedback').className = 'dq-feedback';
  }

  selectCategorizationAnswer(answer) {
    const buttons = document.querySelectorAll('.dq-option');
    buttons.forEach(btn => btn.classList.remove('selected'));
    Array.from(buttons).find(btn => btn.dataset.answer === answer).classList.add('selected');
    this.selectedAnswer = answer;
    this.submitCategorizationAnswer();
  }

  submitCategorizationAnswer() {
    const section   = this.config.course.sections[this.currentSectionIndex];
    const question  = section.questions[this.currentQuestionIndex];
    const isCorrect = this.selectedAnswer === question.correct;

    this.quizAnswers[section.id].push({
      questionId: question.id,
      selected: this.selectedAnswer,
      correct: question.correct,
      isCorrect
    });

    document.querySelectorAll('.dq-option').forEach(btn => {
      btn.disabled = true;
      if (btn.dataset.answer === question.correct)                  btn.classList.add('correct');
      else if (btn.dataset.answer === this.selectedAnswer && !isCorrect) btn.classList.add('incorrect');
    });

    const feedback    = document.getElementById('feedback');
    feedback.className = 'dq-feedback show ' + (isCorrect ? 'correct' : 'incorrect');
    feedback.innerHTML = question.feedback[this.selectedAnswer];

    const isLast = this.currentQuestionIndex >= section.questions.length - 1;
    const nextBtn = document.getElementById('next-btn');
    nextBtn.textContent   = isLast ? 'See Results â†’' : 'Next â†’';
    nextBtn.style.display = 'inline-block';
  }

  nextCategorizationQuestion() {
    const section = this.config.course.sections[this.currentSectionIndex];
    if (this.currentQuestionIndex < section.questions.length - 1) {
      this.currentQuestionIndex++;
      this.renderCategorizationQuestion(section);
    } else {
      this.showCategorizationScore(section);
    }
  }

  showCategorizationScore(section) {
    const answers = this.quizAnswers[section.id];
    const correct = answers.filter(a => a.isCorrect).length;
    const total   = answers.length;
    const pct     = Math.round((correct / total) * 100);
    const msg     = pct === 100 ? 'Perfect score!' : pct >= 70 ? 'Nice work!' : 'Keep practicing!';

    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    document.getElementById('course-content').innerHTML = `
      <div class="step active dq-container">
        <div class="dq-score-screen">
          <div class="dq-score-pct">${pct}%</div>
          <div class="dq-score-detail">${correct} of ${total} correct</div>
          <div class="dq-score-msg">${msg}</div>
        </div>
        <div class="dq-btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-primary" onclick="courseApp.nextSection()">Continue â†’</button>
          </div>
        </div>
      </div>
    `;
  }

  // â”€â”€ Slider quiz â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderSliderQuiz(section) {
    this.currentQuestionIndex = 0;
    this.quizAnswers[section.id] = [];

    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active cs-step">
        <div id="cs-statement" class="cs-statement"></div>
        <div class="cs-score-label">Score</div>
        <div class="cs-track-outer">
          <div class="cs-numbers-row">
            <span>100</span><span>50</span><span>0</span>
          </div>
          <div class="cs-track-area" id="cs-track-area">
            <div class="cs-correct-zone" id="correct-zone"></div>
            <input type="range" min="0" max="100" value="50" id="slider"
              oninput="courseApp.updateSliderValue(this.value)">
            <div class="cs-value-pill" id="value-pill" style="left:50%">50</div>
          </div>
          <div class="cs-endpoints">
            <span>Framed</span><span>Non-Framed</span>
          </div>
        </div>
        <div class="feedback" id="feedback"></div>
        <div class="btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-submit" id="submit-btn" onclick="courseApp.submitSliderAnswer()">Submit</button>
            <button class="btn btn-primary" id="next-btn" style="display:none;" onclick="courseApp.nextSliderQuestion()">Next â†’</button>
          </div>
        </div>
      </div>
    `;
  }

  setupSliderQuiz(section) {
    this.renderSliderQuestion(section);
  }

  renderSliderQuestion(section) {
    const question = section.questions[this.currentQuestionIndex];

    document.getElementById('cs-statement').textContent = question.statement;

    const slider   = document.getElementById('slider');
    slider.value   = 50;
    slider.disabled = false;

    const pill     = document.getElementById('value-pill');
    pill.textContent = '50';
    pill.style.left = '50%';
    pill.style.background = '';

    const zone     = document.getElementById('correct-zone');
    zone.className = 'cs-correct-zone';

    document.getElementById('submit-btn').style.display = 'inline-block';
    document.getElementById('next-btn').style.display   = 'none';
    document.getElementById('feedback').className       = 'feedback';
  }

  updateSliderValue(value) {
    const pill  = document.getElementById('value-pill');
    const pct   = value / 100;
    pill.textContent = value;
    pill.style.left  = `calc(${100 - value}% + ${(pct - 0.5) * 28}px)`;
  }

  getTierFromValue(value, tiers) {
    if (value >= tiers.non_framed.min && value < tiers.non_framed.max) return 'non_framed';
    if (value >= tiers.mid.min        && value < tiers.mid.max)        return 'mid';
    return 'framed';
  }

  submitSliderAnswer() {
    const section     = this.config.course.sections[this.currentSectionIndex];
    const question    = section.questions[this.currentQuestionIndex];
    const sliderValue = parseInt(document.getElementById('slider').value);
    const userTier    = this.getTierFromValue(sliderValue, section.tiers);
    const isCorrect   = userTier === question.correct_tier;

    this.quizAnswers[section.id].push({
      questionId: question.id,
      value: sliderValue,
      tier: userTier,
      correctTier: question.correct_tier,
      isCorrect
    });

    document.getElementById('slider').disabled = true;

    const tierData = section.tiers[question.correct_tier];
    const zone     = document.getElementById('correct-zone');
    zone.style.left  = (100 - tierData.max) + '%';
    zone.style.width = (tierData.max - tierData.min) + '%';
    zone.className   = 'cs-correct-zone show';

    const pill            = document.getElementById('value-pill');
    pill.style.background = isCorrect ? 'var(--success)' : 'var(--danger)';

    const feedback        = document.getElementById('feedback');
    feedback.className    = 'feedback show ' + (isCorrect ? 'correct' : 'neutral');
    feedback.innerHTML    = question.feedback[userTier];

    document.getElementById('submit-btn').style.display = 'none';

    const isLast  = this.currentQuestionIndex >= section.questions.length - 1;
    const nextBtn = document.getElementById('next-btn');
    nextBtn.textContent   = isLast ? this.getNextButtonText() : 'Next â†’';
    nextBtn.style.display = 'inline-block';
  }

  nextSliderQuestion() {
    const section = this.config.course.sections[this.currentSectionIndex];
    if (this.currentQuestionIndex < section.questions.length - 1) {
      this.currentQuestionIndex++;
      this.renderSliderQuestion(section);
    } else {
      this.nextSection();
    }
  }

  getNextButtonText() {
    const next = this.config.course.sections[this.currentSectionIndex + 1];
    if (!next) return 'Continue â†’';
    if (next.type === 'video') return `Continue to ${next.label} â†’`;
    return 'Continue â†’';
  }

  // â”€â”€ Text input â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderTextInput(section) {
    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active">
        <div class="section-label">${section.label}</div>
        <div class="section-title">${section.title}</div>
        <div class="section-instructions">${section.instructions}</div>
        <div class="text-prompt">${section.prompt}</div>
        <textarea class="text-input-area" placeholder="${section.placeholder}" id="text-input"></textarea>
        <div class="btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-primary" onclick="courseApp.submitTextInput()">${section.button_text}</button>
          </div>
        </div>
      </div>
    `;
  }

  submitTextInput() {
    const input   = document.getElementById('text-input').value;
    const section = this.config.course.sections[this.currentSectionIndex];
    if (!this.quizAnswers[section.id]) this.quizAnswers[section.id] = [];
    this.quizAnswers[section.id].push({ prompt: section.prompt, answer: input });
    this.nextSection();
  }

  // â”€â”€ Links & submission â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderLinksSubmission(section) {
    const backBtn = this.currentSectionIndex > 0
      ? `<button class="btn btn-back" onclick="courseApp.previousSection()">â† Back</button>`
      : '<div></div>';

    return `
      <div class="step active">
        <div class="section-label">${section.label}</div>
        <div class="section-title" style="margin-bottom:28px;">Tools &amp; Submission</div>

        <!-- Tone Balancer link -->
        <div class="resource-section">
          <div class="resource-label">Interactive Tool</div>
          <a href="https://chatgpt.com/g/g-68c1c8797f4c8191bf2c985aea077f7a-tone-balancer-2-0"
             target="_blank" class="resource-link-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>
            Open the Tone Balancer
          </a>
        </div>

        <!-- Copy text -->
        <div class="resource-section">
          <div class="resource-label">Text to Copy &amp; Share</div>
          <div id="exchange-day-text" class="copy-block">
            <strong>#ExchangeDay</strong> is a global celebration of the incredible impact of international exchange. It's a day when participants, community members, and program leaders come together to share cultural practices, embrace American traditions, give back to their communities, and have a blast doing it.
          </div>
          <button class="copy-btn" onclick="
            navigator.clipboard.writeText(document.getElementById('exchange-day-text').innerText).then(() => {
              this.textContent = 'âœ“ Copied!';
              this.style.color = 'var(--success)';
              this.style.borderColor = 'var(--success)';
              setTimeout(() => { this.textContent = 'Copy text'; this.style.color = ''; this.style.borderColor = ''; }, 2000);
            });
          ">Copy text</button>
        </div>

        <!-- Two Audiences image -->
        <div class="resource-section">
          <div class="resource-label">Reference</div>
          <img src="images/two-audience.png" alt="Two Audiences" class="resource-image">
        </div>

        <!-- MS Form -->
        <div class="resource-section">
          <div class="resource-label">Submit Your Response</div>
          <iframe
            src="https://forms.cloud.microsoft/Pages/ResponsePage.aspx?id=DwmHHIIIz0G5qBp8WUSC-ZmoJok0TJtKrrqdEyW0HRFUNEFJNFoxMFRCTEZZNVEwN09MN1MwTTNERC4u&embed=true"
            class="ms-form-frame" frameborder="0" marginwidth="0" marginheight="0"
            allowfullscreen webkitallowfullscreen mozallowfullscreen msallowfullscreen>
          </iframe>
        </div>

        <div class="btn-row">
          ${backBtn}
          <div class="btn-group-right">
            <button class="btn btn-primary" onclick="courseApp.nextSection()">${section.button_text}</button>
          </div>
        </div>
      </div>
    `;
  }

  // â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  nextSection() {
    if (this.currentSectionIndex < this.config.course.sections.length - 1) {
      this.currentSectionIndex++;
      this.currentQuestionIndex = 0;
      this.renderCurrentSection();
    } else {
      this.showCompletion();
    }
  }

  previousSection() {
    if (this.currentSectionIndex > 0) {
      this.currentSectionIndex--;
      this.currentQuestionIndex = 0;
      this.renderCurrentSection();
    }
  }

  // â”€â”€ Completion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  showCompletion() {
    document.getElementById('course-content').innerHTML = '';

    const completion = document.getElementById('completion');
    const config     = this.config.course.completion;
    const score      = this.calculateScore();

    completion.innerHTML = `
      <div class="completion-card">
        <div class="completion-icon">${config.icon}</div>
        <h2>${config.title}</h2>
        <p>${config.description}</p>
        <div class="score-badge">${score.text}</div>
      </div>
    `;

    completion.classList.add('show');

    // All dots green
    this.config.course.sections.forEach((_, index) => {
      const item   = document.getElementById(`nav-item-${index}`);
      const status = document.getElementById(`nav-status-${index}`);
      if (item)   { item.classList.remove('active'); item.classList.add('completed'); }
      if (status) status.innerHTML = 'âœ“';
    });

    const fill  = document.getElementById('sidebar-prog-fill');
    const pctEl = document.getElementById('sidebar-prog-pct');
    if (fill)  fill.style.width   = '100%';
    if (pctEl) pctEl.textContent  = '100%';

    const typeEl  = document.getElementById('top-bar-type');
    const titleEl = document.getElementById('top-bar-title');
    if (typeEl)  typeEl.textContent  = 'Complete';
    if (titleEl) titleEl.textContent = 'Course Finished';

    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      progressBar.innerHTML = '';
      this.config.course.sections.forEach(() => {
        const dot = document.createElement('div');
        dot.className = 'prog-dot completed';
        progressBar.appendChild(dot);
      });
    }
  }

  calculateScore() {
    let totalCorrect = 0, totalQuestions = 0;
    Object.keys(this.quizAnswers).forEach(quizId => {
      this.quizAnswers[quizId].forEach(answer => {
        totalQuestions++;
        if (answer.isCorrect) totalCorrect++;
      });
    });
    const percentage = totalQuestions > 0 ? Math.round((totalCorrect / totalQuestions) * 100) : 0;
    return {
      correct: totalCorrect,
      total: totalQuestions,
      percentage,
      text: `Score: ${totalCorrect}/${totalQuestions} correct (${percentage}%)`
    };
  }
}

let courseApp;
document.addEventListener('DOMContentLoaded', () => {
  courseApp = new CourseApp();
});
</script>

</body>
</html>
